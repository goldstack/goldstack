{
  "html": "<p></p><div class=\"markdown-fragment\"><p>It can often be overwhelming to start working with a new starter project. If you provide us with some details about your project, we can generate a baseline configuration for deployment to AWS.</p>\n<p>The following properties are required for general project configuration:</p>\n<ul>\n<li><strong>Project Name</strong>: A name for this project.</li>\n<li><strong>Deployment</strong>: Choose if you want to use the configuration tool to configure production or development infrastructure. At this point, the configuration tool only supports definition of either production or development infrastructure. However, after you download your project, you can configure unlimited additional deployment configurations (for example if you choose to define development infrastructure now, you can define production infrastructure later).</li>\n<li><strong>AWS Region</strong>: The <a href=\"https://aws.amazon.com/about-aws/global-infrastructure/regions_az/#:~:text=AWS%20maintains%20multiple%20geographic%20Regions,Africa%2C%20and%20the%20Middle%20East.\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">AWS region</a> infrastructure that your project should be deployed to.</li>\n</ul></div><p></p>\n<h2 class=\"heading\"><span id=\"aws-configuration\"></span><a href=\"#aws-configuration\">AWS Configuration</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h2>\n<p></p><div class=\"markdown-fragment\"><p>In order to set up infrastructure on AWS and for running deployed services, Goldstack needs access to AWS credentials. These can be provided in a number of ways:</p>\n<h3 class=\"heading\"><span id=\"using-the-default-local-aws-user-1\"></span><a href=\"#using-the-default-local-aws-user-1\"><span id=\"using-the-default-local-aws-user\"></span><a href=\"#using-the-default-local-aws-user\" class=\"relative\">Using the default local AWS user</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h3>\n<p>If you have the <a href=\"https://aws.amazon.com/cli/\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">AWS CLI</a> installed and have <a href=\"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">credentials configured locally</a>, Goldstack will use the default AWS user if no other configuration options are provided.</p>\n<p>You can check if the default AWS user is configured by running <a href=\"https://docs.aws.amazon.com/cli/latest/reference/configure/list.html\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\"><code class=\"inline\">aws configure list</code></a>.</p>\n<pre><code>aws configure list\n</code></pre>\n<h3 class=\"heading\"><span id=\"using-a-specific-local-aws-user-1\"></span><a href=\"#using-a-specific-local-aws-user-1\"><span id=\"using-a-specific-local-aws-user\"></span><a href=\"#using-a-specific-local-aws-user\" class=\"relative\">Using a specific local AWS user</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h3>\n<p></p><div class=\"markdown-fragment\"><p>The AWS CLI uses a standardised location to store AWS credentials and configuration. Goldstack will attempt to read from this configuration if no other configuration was provided.</p>\n<p>Please see the AWS documentation to learn more about where these files are stored and how to create them: <a href=\"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">AWS CLI / Configuration and credential file settings</a>.</p>\n<p>Note that Goldstack will require both the <code class=\"inline\">credentials</code> as well as the <code class=\"inline\">config</code> file, and in the <code class=\"inline\">config</code> file specifically the <code class=\"inline\">region</code> needs to be specified.</p>\n<p>Goldstack will use the <code class=\"inline\">default</code> profile if no profile is specified. If you want to use more than one profile (e.g. for different deployment stages) you can use the Goldstack AWS configuration file. This file is stored in the repository in the following location:</p>\n<pre class=\"language-bash language-bash language-bash\"><code class=\"language-bash\">config/infra/aws/config.json\n</code></pre>\n<p>You can define a number of different users as follows:</p>\n<pre class=\"language-json language-json language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"users\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dev\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"profile\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"config\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"profile\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"awsDefaultRegion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"us-west-2\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"prod\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"profile\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"config\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"profile\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"prod\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"awsDefaultRegion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"us-west-2\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Note that Goldstack also supports overriding the path of the default AWS configuration and credentials files:</p>\n<pre class=\"language-json language-json language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"users\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"prod\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"profile\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"config\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"profile\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"prod\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"awsDefaultRegion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"us-west-2\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"awsConfigFileName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/path/to/config/file\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"awsCredentialsFileName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/path/to/credentials/file\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div><p></p>\n<h3 class=\"heading\"><span id=\"using-process-credentials-1\"></span><a href=\"#using-process-credentials-1\"><span id=\"using-process-credentials\"></span><a href=\"#using-process-credentials\" class=\"relative\">Using process credentials</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h3>\n<p>There are a number of issues when trying to work with multiple profiles and SSO credentials, see <a href=\"https://github.com/aws/aws-cli/issues/4982#issuecomment-939348934\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">aws/aws-cli#4982 (comment)</a> and <a href=\"https://github.com/goldstack/goldstack/issues/17\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">goldstack/goldstack#17</a>.</p>\n<p>An excellent way to deal with situations where we do not want to provide the user credentials directly is to use <a href=\"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sourcing-external.html\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">process credentials</a>.</p>\n<p>Goldstack supports defining process credentials in the <code class=\"inline\">config/infra/aws/config.json</code> file.</p>\n<pre class=\"language-json language-json\"><code class=\"language-json\"><span class=\"token property\">\"users\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dev-user\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"profile\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"config\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"profile\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"with-process\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"awsDefaultRegion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"us-west-2\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"credentialsSource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"process\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n</code></pre>\n<p>This will require a <code class=\"inline\">~/.aws/config</code> file as follows:</p>\n<pre><code>[with-process]\ncredential_process=[your command]\n</code></pre>\n<p>Useful commands to use in the <code class=\"inline\">credential_process</code> field are: <a href=\"https://github.com/ryansonshine/aws-sso-creds-helper\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">aws-sso-creds-helper</a>, <a href=\"https://github.com/benkehoe/aws-sso-util#adding-aws-sso-support-to-aws-sdks\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">aws-sso-util</a>, <a href=\"https://github.com/99designs/aws-vault/blob/0615e7c8cddc5d5046e29b87acfc0fe73c1aa998/USAGE.md#using-credential_process\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">aws-vault</a> and <a href=\"https://github.com/linaro-its/aws2-wrap#use-the-credentials-via-awsconfig\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">aws2-wrap</a>.</p>\n<p>Note that it is also possible to place the credentials file in a different location.</p>\n<pre class=\"language-json language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"users\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"prod\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"profile\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"config\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"profile\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"prod\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"awsDefaultRegion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"us-west-2\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"awsConfigFileName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/path/to/config/file\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"credentialsSource\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"process\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3 class=\"heading\"><span id=\"using-credentials-in-goldstack-configuration-file-1\"></span><a href=\"#using-credentials-in-goldstack-configuration-file-1\"><span id=\"using-credentials-in-goldstack-configuration-file\"></span><a href=\"#using-credentials-in-goldstack-configuration-file\" class=\"relative\">Using credentials in Goldstack configuration file</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h3>\n<p></p><div class=\"markdown-fragment\"><p>AWS credentials they can be configured directly in the Goldstack configuration file. Note we do not recommend this option. If you can, use the user credentials or environment variables.</p>\n<p>This file can be found under the following paths:</p>\n<pre class=\"language-bash language-bash language-bash\"><code class=\"language-bash\">config/infra/aws/config.json\n</code></pre>\n<p>The configuration file can have contents as follows:</p>\n<pre class=\"language-json language-json language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"users\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dev-user\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"apiKey\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"config\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"awsAccessKeyId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[Your Access Key ID]\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"awsSecretAccessKey\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[Your Secret Access Key]\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"awsDefaultRegion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[Region for user]\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"prod-user\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"apiKey\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"config\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"awsAccessKeyId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[Your Access Key ID]\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"awsSecretAccessKey\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[Your Secret Access Key]\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"awsDefaultRegion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[Region for user]\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Make sure that the <code class=\"inline\">\"name\"</code> property matches the <code class=\"inline\">\"awsUser\"</code> of module deployments for which the user should be used. There is no limit to how many users you can define.</p>\n<p>Note that this file should <em>not</em> checked into source control if AWS credentials are provided.</p>\n<p>If you want to supply AWS user credentials in your CI/CD systems, these can be supplied using environment variables and for local development you can use the files provided by the AWS CLI (see above).</p></div><p></p>\n<h3 class=\"heading\"><span id=\"credentials-in-environment-variables-1\"></span><a href=\"#credentials-in-environment-variables-1\"><span id=\"credentials-in-environment-variables\"></span><a href=\"#credentials-in-environment-variables\" class=\"relative\">Credentials in Environment Variables</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h3>\n<p></p><div class=\"markdown-fragment\"><p>Goldstack can read AWS <em>Access Key ID</em> and <em>Secret Access Key</em> from environment variables. The easiest way is to set the following environment variables:</p>\n<pre class=\"language-bash language-bash language-bash\"><code class=\"language-bash\">AWS_USER_NAME: <span class=\"token punctuation\">[</span>Your user name<span class=\"token punctuation\">]</span>\nAWS_ACCESS_KEY_ID: <span class=\"token punctuation\">[</span>Your access key id<span class=\"token punctuation\">]</span>\nAWS_SECRET_ACCESS_KEY: <span class=\"token punctuation\">[</span>Your secret access key<span class=\"token punctuation\">]</span>\nAWS_DEFAULT_REGION: <span class=\"token punctuation\">[</span>User region<span class=\"token punctuation\">]</span>\n</code></pre>\n<p>The <code class=\"inline\">AWS_USER_NAME</code> variable is optional but can be useful for explicitly referencing the correct Goldstack user in deployments. The above setup is particularly useful for CI/CD environments. For instance, when using <a href=\"https://github.com/actions\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub Actions</a>, environment variables could be configured as follows:</p>\n<pre class=\"language-yaml language-yaml language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy UI\n  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n    yarn workspace my-ui deploy dev</span>\n  <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">AWS_USER_NAME</span><span class=\"token punctuation\">:</span> dev<span class=\"token punctuation\">-</span>user\n    <span class=\"token key atrule\">AWS_ACCESS_KEY_ID</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>secrets.AWS_ACCESS_KEY_ID<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">AWS_SECRET_ACCESS_KEY</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>secrets.AWS_SECRET_ACCESS_KEY<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">AWS_DEFAULT_REGION</span><span class=\"token punctuation\">:</span> us<span class=\"token punctuation\">-</span>west<span class=\"token punctuation\">-</span><span class=\"token number\">2</span>\n</code></pre>\n<p>The values of the environment variables are defined in <a href=\"https://docs.github.com/en/free-pro-team@latest/actions/reference/encrypted-secrets\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub Secrets</a>.</p></div><p></p></div><p></p>\n<h2 class=\"heading\"><span id=\"how-to-get-aws-credentials\"></span><a href=\"#how-to-get-aws-credentials\">How to get AWS Credentials</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h2>\n<p></p><div class=\"markdown-fragment\"><p>\n      </p><div class=\"card card-bordered bg-soft-info\">\n        <div class=\"card-body\">\n        <h5 class=\"heading\"><span id=\"step-by-step-video-guide-1\"></span><a href=\"#step-by-step-video-guide-1\"><span id=\"step-by-step-video-guide\"></span><a href=\"#step-by-step-video-guide\" class=\"relative\">Step-by-step Video Guide</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h5>\n          <div class=\"card-text\">\n            <div class=\"embed-responsive embed-responsive-16by9\">\n              <iframe class=\"embed-responsive-item\" src=\"https://www.youtube.com/embed/-lWrkpzEgfs\" allowfullscreen></iframe>\n            </div>\n          </div>\n        </div>\n      </div><p></p>\n<p>The easiest way to configure the AWS user for Goldstack is to do it during project setup by providing an <em>AWS Access Key Id</em> and <em>AWS Secret Access Key</em>. To obtain these, please do the following:</p>\n<ul>\n<li>Create an AWS account if you do not already have one. See <a href=\"https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-aws-account/\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">instructions on this from AWS here</a>.</li>\n<li>Open the AWS console IAM management and sign in if required: <a href=\"https://console.aws.amazon.com/iam/home?region=us-east-1#/home\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">https://console.aws.amazon.com/iam/home?region=us-east-1#/home</a></li>\n<li>Click on <em>Users</em> in the menu on the right</li>\n</ul>\n<p><img src=\"https://cdn.goldstack.party/img/202010/add_user.png\" alt=\"Add User in AWS console\"></p>\n<ul>\n<li>Provide a username of your choice, for instance 'goldstack-dev'</li>\n<li>Select the Access Type <em>Programmatic Access</em></li>\n</ul>\n<p><img src=\"https://cdn.goldstack.party/img/202410/aws-user-1.png\" alt=\"Provide user details\"></p>\n<ul>\n<li>Click on the button <em>Next: Permissions</em></li>\n<li>Select <em>Attach existing policies directly</em></li>\n</ul>\n<p><img src=\"https://cdn.goldstack.party/img/202410/aws-user-2.png\" alt=\"Attach policy\"></p>\n<ul>\n<li>Select the Policy <em>AdministratorAccess</em></li>\n</ul>\n<p><img src=\"https://cdn.goldstack.party/img/202410/aws-user-policy.png\" alt=\"Search for policy\"></p>\n<ul>\n<li>Click on the button <em>Next</em></li>\n<li>On the review page click <em>Create user</em></li>\n<li>Click on the name of the user you have just created</li>\n<li>Then click on the tab <em>Security credentials</em></li>\n</ul>\n<p><img src=\"https://cdn.goldstack.party/img/202410/aws-user-4.png\" alt=\"Get to security credentials\"></p>\n<ul>\n<li>Scroll down to <em>Access Keys</em> and click <em>Create Access Key</em></li>\n</ul>\n<p><img src=\"https://cdn.goldstack.party/img/202410/aws-user-5.png\" alt=\"Create access key\"></p>\n<ul>\n<li>Select <em>Local code</em> and check the box under <em>Confirmation</em>, and click <em>Next</em></li>\n</ul>\n<p><img src=\"https://cdn.goldstack.party/img/202410/aws-user-6.png\" alt=\"Confirm key type\"></p>\n<ul>\n<li>You do not need to provide a description tag value. Click <em>Create access key</em>.</li>\n</ul>\n<p>Now you can copy the <em>Access Key ID</em> and add it to the Goldstack configuration form or add it into your local configuration file. Do the same with the <em>Secret Access Key</em> (It can be shown by clicking on Show).</p>\n<p><img src=\"https://cdn.goldstack.party/img/202410/aws-user-7.png\" alt=\"Copy ID and key\"></p>\n<p>Note that it is recommended to only provide this key and secret for development systems (and prototype/hobby production systems). For all other systems, it is recommended to provide this key and secret only through environment variables (see below).</p></div><p></p>\n<h2 class=\"heading\"><span id=\"hosted-zone-configuration\"></span><a href=\"#hosted-zone-configuration\">Hosted Zone Configuration</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h2>\n<p></p><div class=\"markdown-fragment\"><p>\n      </p><div class=\"card card-bordered bg-soft-info\">\n        <div class=\"card-body\">\n        <h5 class=\"heading\"><span id=\"video-guide-1\"></span><a href=\"#video-guide-1\"><span id=\"video-guide\"></span><a href=\"#video-guide\" class=\"relative\">Video Guide</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h5>\n          <div class=\"card-text\">\n            <div class=\"embed-responsive embed-responsive-16by9\">\n              <iframe class=\"embed-responsive-item\" src=\"https://www.youtube.com/embed/9rug-hhkxSc\" allowfullscreen></iframe>\n            </div>\n          </div>\n        </div>\n      </div><p></p>\n<p>Many templates need to deploy resources to a domain, for instance for a <a href=\"./../modules/static-website-aws\" class=\"relative\">static website</a> or for an <a href=\"./../modules/lambda-express\" class=\"relative\">API server</a>. Goldstack templates can provide the DNS configuration required but you need to specify the <a href=\"https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">Route 53 hosted zone</a> that the DNS entries should be added to. You can either use an already existing hosted zone or create a new one.</p>\n<h3 class=\"heading\"><span id=\"creating-a-new-hosted-zone-1\"></span><a href=\"#creating-a-new-hosted-zone-1\"><span id=\"creating-a-new-hosted-zone\"></span><a href=\"#creating-a-new-hosted-zone\" class=\"relative\">Creating a new hosted zone</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h3>\n<p>The following steps describe how to create a new hosted zone in AWS Route 53.</p>\n<ul>\n<li>(Optional) If you haven't registered a domain, you can <a href=\"https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/domain-register.html\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">register a domain through Route 53</a>.</li>\n<li>Go to the <a href=\"https://console.aws.amazon.com/route53/v2/hostedzones#\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">Route 53 AWS console</a></li>\n<li>Click on <em>Create Hosted Zone</em></li>\n</ul>\n<p><img src=\"https://cdn.goldstack.party/img/202010/create_hosted_zone.png\" alt=\"Create hosted zone\"></p>\n<ul>\n<li>Provide the name of a domain you own (or a subdomain of a domain you own) and click <em>Create hosted zone</em>.</li>\n</ul>\n<p><img src=\"https://cdn.goldstack.party/img/202010/hosted_zone_details.png\" alt=\"Provide hosted zone details\"></p>\n<ul>\n<li>If you haven't registered your domain through Route 53, configure your domain with your domain registrar to use the nameservers Route 53 lists for your domain.</li>\n</ul>\n<p><img src=\"https://cdn.goldstack.party/img/202010/nameservers.png\" alt=\"Provide hosted zone details\"></p>\n<p>Now you can copy the domain name of your hosted zone and provide this in your template configuration</p>\n<p><img src=\"https://cdn.goldstack.party/img/202010/domainname.png\" alt=\"Domain name to be used for package configuration\"></p>\n<p>Note that for the actual domain your package uses, you can specify the domain name of the hosted zone directly, or one of it's subdomains. For instance, if your hosted zone domain is <code class=\"inline\">yourdomain.com</code> you can configure a website template to be deployed to <code class=\"inline\">yourdomain.com</code> or <code class=\"inline\">website.yourdomain.com</code>.</p>\n<p>You can use the same hosted zone for multiple modules. Just make sure to use subdomains to avoid conflicts between packages. For instance, if you configure a website to be deployed to <code class=\"inline\">mydomain.com</code> then deploy your API to <code class=\"inline\">api.mydomain.com</code>.</p>\n<h3 class=\"heading\"><span id=\"using-an-existing-hosted-zone-1\"></span><a href=\"#using-an-existing-hosted-zone-1\"><span id=\"using-an-existing-hosted-zone\"></span><a href=\"#using-an-existing-hosted-zone\" class=\"relative\">Using an existing hosted zone</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h3>\n<p>If you already have a hosted zone configured for the domain you would like to use for your template, you simply need to provide the domain of the hosted zone.</p>\n<ul>\n<li>You can find all hosted zones you have configured in the <a href=\"https://console.aws.amazon.com/route53/v2/hostedzones#\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">Route 53 Console</a></li>\n<li>Copy the value provided under <em>Domain name</em> and provide this in your template configuration</li>\n</ul>\n<p><img src=\"https://cdn.goldstack.party/img/202010/domainname_list.png\" alt=\"Determining domain name from hosted zone list\"></p></div><p></p>\n<h2 class=\"heading\"><span id=\"terraform\"></span><a href=\"#terraform\">Terraform</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h2>\n<p></p><div class=\"markdown-fragment\"><p>All Goldstack templates contain Terraform Infrastructure as Code definitions. Goldstack provides easy tooling to stand up this infrastructure. Terraform will use the <em>AWS credentials</em> configured as per the instructions above.</p>\n<p>All state will be stored in <a href=\"https://www.terraform.io/docs/language/settings/backends/s3.html\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">Terraform S3 remote state using DynamoDB locking</a>. Goldstack will automatically create a bucket for storing the state in the same AWS account that the infrastructure is deployed to (thus being able to use the same AWS credentials).</p>\n<p>During standing up the infrastructure for the first package of a project, Goldstack will create the <code class=\"inline\">config/infra/aws/terraform.json</code> file that contains the S3 bucket and DynamoDB table for all packages deployed to a respective AWS account. Below an example <code class=\"inline\">terraform.json</code> file.</p>\n<pre class=\"language-json language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"remoteState\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dev\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"terraformStateBucket\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"goldstack-tfstate-67a73e60720c25855a39baeb1218b55229578671\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"terraformStateDynamoDBTable\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"goldstack-tfstate-a82076777995c7254fbcae1f9e8013fee75833f2-lock\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"user\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"prod\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"terraformStateBucket\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"goldstack-tfstate-0cb1a35a83c9c952321ee4addbe76d096b031d47\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"terraformStateDynamoDBTable\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"goldstack-tfstate-0cb1a35a83c9c957772ee4addbe76d096b031d47-lock\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>To prevent Goldstack from auto-generating the bucket and table names, provide a <code class=\"inline\">terraform.json</code> file before standing up the infrastructure for your first package. Goldstack will create bucket and table using the names you specify then. Also, if you have special requirements for your bucket and table, you can create these before standing up the infrastructure with Goldstack. You only need to ensure that the bucket and table fulfil the requirements of Terraform for storing its remote state.</p>\n<p>All packages included in a project will use the same bucket and DynamoDB table. The name of the state file will be defined in the <code class=\"inline\">goldstack.json</code> file within each package.</p>\n<pre class=\"language-json language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"$schema\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./schemas/package.schema.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mypackage\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"deployments\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dev\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"tfStateKey\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mypackage-dev-f53056a8788c8eb7a1ac.tfstate\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>If the <code class=\"inline\">tfStateKey</code> property is defined before running <code class=\"inline\">yarn infra init [deployment]</code>, Goldstack will use the name specified as key for the state in bucket and DynamoDB table. If the <code class=\"inline\">tfStateKey</code> property is not defined, a name will be generated and <code class=\"inline\">goldstack.json</code> updated.</p>\n<p>Ensure that after standing up infrastructure for the first time to commit and push changes to your project, since Goldstack will update <code class=\"inline\">goldstack.json</code> config and the <code class=\"inline\">config/infra/aws/terraform.json</code> config. This is only required for initialising the infrastructure for each package and target AWS account (and if you do not provide the names for bucket, table and state files manually). For subsequent updates to the infrastructure it is not necessary to update the source files.</p>\n<h3 class=\"heading\"><span id=\"upgrading-terraform-version-1\"></span><a href=\"#upgrading-terraform-version-1\"><span id=\"upgrading-terraform-version\"></span><a href=\"#upgrading-terraform-version\" class=\"relative\">Upgrading Terraform Version</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h3>\n<p>Terraform frequently releases new versions of their tooling. Goldstack provides tooling to support different versions of Terraform for different modules and for upgrading Terraform.</p>\n<p>⚠️ Note that upgrading Terraform is often a difficult process and although Goldstack provides some tools to make this process easier, expect that a number of manual steps and fixes will be required.</p>\n<p>First note that Goldstack allows defining the version of Terraform that is to be used for executing infrastructure commands in two ways:</p>\n<ol>\n<li>Centrally for a package using a file <code class=\"inline\">infra/tfConfig.json</code> such as the following:</li>\n</ol>\n<pre class=\"language-json language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"tfVersion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.10\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<ol start=\"2\">\n<li>If a project has multiple different deployments that require different Terraform versions, or for first upgrading Terraform for test environments, it is also possible to specify the Terraform version per deployment. For this, add the <code class=\"inline\">\"tfVersion\"</code> property to a <code class=\"inline\">\"configuration\"</code> for a deployment in <code class=\"inline\">goldstack.json</code>, for instance:</li>\n</ol>\n<pre class=\"language-json language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"$schema\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./schemas/package.schema.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"lambda-api-template\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"template\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"lambda-api\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"templateVersion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.1.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"configuration\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"deployments\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"prod\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"awsRegion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"us-west-2\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"awsUser\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"goldstack-dev\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"configuration\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"tfVersion\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.10\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Changing the Terraform version will result in Goldstack using the specified version of the Docker image <code class=\"inline\">hashicorp/terraform:[version]</code>. Please avoid specifying minor versions: use <code class=\"inline\">0.12</code> not <code class=\"inline\">0.12.1</code>.</p>\n<p>Note that Terraform often provides upgrade scripts for Terraform. These can either be applied by installing the matching Terraform version locally or using the following Goldstack command:</p>\n<pre><code>yarn infra upgrade [deployment] [targetVersion]\n</code></pre>\n<p>Note that this command is only supported for a limited number of versions. Also versions need to be upgraded one jump at a time, e.g. going from <code class=\"inline\">0.12</code> to <code class=\"inline\">0.13</code> is supported but not going from <code class=\"inline\">0.12</code> to <code class=\"inline\">0.14</code> or higher versions. For a reference of available versions, see <a href=\"https://releases.hashicorp.com/terraform/\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">Terraform Versions</a>.</p>\n<p>It is recommend to run <code class=\"inline\">yarn infra init [deployment]</code>, <code class=\"inline\">yarn infra up [deployment]</code> and <code class=\"inline\">yarn deploy [deployment]</code> after every <code class=\"inline\">upgrade</code> command.</p>\n<p>Note that you may have to upgrade various versions in <code class=\"inline\">infra/aws/terraform/providers.tf</code> as well as making various other changes upgrading Terraform may involve, also see <a href=\"https://www.terraform.io/language/upgrade-guides\" class=\"absolute\" target=\"_blank\" rel=\"noopener noreferrer\">Terraform Upgrade Guides</a>.</p>\n<h3 class=\"heading\"><span id=\"releasing-state-locks-1\"></span><a href=\"#releasing-state-locks-1\"><span id=\"releasing-state-locks\"></span><a href=\"#releasing-state-locks\" class=\"relative\">Releasing State Locks</a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></a><span class=\"permalink\"><svg viewBox=\"0 0 16 16\" width=\"16\" height=\"16\">\n  <g stroke-width=\"1\" fill=\"#000000\" stroke=\"#000000\">\n    <path fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M8.995,7.005 L8.995,7.005c1.374,1.374,1.374,3.601,0,4.975l-1.99,1.99c-1.374,1.374-3.601,1.374-4.975,0l0,0c-1.374-1.374-1.374-3.601,0-4.975 l1.748-1.698\"></path>\n    <path fill=\"none\" stroke=\"#000000\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" d=\"M7.005,8.995 L7.005,8.995c-1.374-1.374-1.374-3.601,0-4.975l1.99-1.99c1.374-1.374,3.601-1.374,4.975,0l0,0c1.374,1.374,1.374,3.601,0,4.975 l-1.748,1.698\"></path>\n  </g>\n</svg></span></h3>\n<p>Goldstack automatically creates Terraform state files on S3 and maintains a state lock using DynamoDB. Sometimes Terraform state can become locked if an operation fails unexpectedly. When performing further Terraform operations, an error as the following will be reported:</p>\n<pre><code>\n│ Error: Error acquiring the state lock\n│\n│ Error message: ConditionalCheckFailedException: The conditional request\n│ failed\n│ Lock Info:\n│   ID:        37ce96a7-3689-8630-f346-9f1e745c038b\n│   Path:      goldstack-tfstate-f865b5cbbebb107ee7639f77a95b6f46c814fff9/env:/prod/server-side-rendering-prod-9241dfab78652931e675.tfstate\n│   Operation: OperationTypeApply\n│   Who:       root@f3f77f0e8b44\n│   Version:   1.1.3\n│   Created:   2022-10-07 22:05:04.2574526 +0000 UTC\n│   Info:\n</code></pre>\n<p>To resolve this error, take note of the <code class=\"inline\">ID</code> above and the <code class=\"inline\">deployment</code> for which the state file has been locked and run the command:</p>\n<pre><code>yarn infra terraform [deployment] force-unlock -force [ID]\n</code></pre></div><p></p>",
  "data": {
    "id": "docs-configuration",
    "title": "Configuration"
  }
}
